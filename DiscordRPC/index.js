var i=[],a=t=>t.length>=128?t.slice(0,125)+"...":t,s=new WebSocket("ws://127.0.0.1:6463/?v=1&client_id=1130698654987067493");s.onopen=()=>{i.push(neptune.intercept("playbackControls/TIME_UPDATE",([t])=>{let{item:e,type:c}=neptune.currentMediaItem;if(c!="track")return;let n=new Date,l=n.getTime()/1e3|0,r=n.setSeconds(n.getSeconds()+(e.duration-t)),o=neptune.store.getState().playbackControls.playbackState=="NOT_PLAYING";s.send(JSON.stringify({cmd:"SET_ACTIVITY",args:{pid:2094112,activity:{timestamps:{...o?{}:{start:l,end:r}},type:2,name:a(e.title),details:a("by "+e.artists.map(p=>p.name).join(", ")),assets:{large_image:`https://resources.tidal.com/images/${e.album.cover.split("-").join("/")}/80x80.jpg`,large_text:`on ${a(e.album.title)}`,...o?{small_image:"paused-icon",small_text:"Paused"}:{}}}}}))}))};async function m(){i.forEach(t=>t());try{s.close()}catch{}}export{m as onUnload};
